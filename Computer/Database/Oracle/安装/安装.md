[参考链接(图形化/静默安装)](https://blog.csdn.net/bjywxc/article/details/104696121/)

##  安装依赖

### 11.2+RHEL7(缺少pkh)

yum install -y binutils.x86_64 compat-libcap1.x86_64 gcc.x86_64 gcc-c++.x86_64 glibc.i686 glibc.x86_64 glibc-devel.i686 glibc-devel.x86_64 libaio.i686 libaio.x86_64 libaio-devel.i686 libaio-devel.x86_64 libgcc.i686 libgcc.x86_64 libstdc++.i686 libstdc++.x86_64 libstdc++-devel.i686 libstdc++-devel.x86_64 libXi.i686 libXi.x86_64 libXtst.i686 libXtst.x86_64 make.x86_64 sysstat.x86_64 compat-libstdc++-33 elfutils-libelf-devel

## 基本内容

### 用户属组

```shell
groupadd oinstall
groupadd dba
groupadd backupdba
groupadd dgdba
groupadd kmdba
groupadd racdba
groupadd oper
echo "oracle" | passwd oracle --stdin
useradd -g oinstall -G oper,dba,backupdba,dgdba,kmdba,racdba -d /home/oracle oracle
#usermod -g oinstall -G oper,dba,backupdba,dgdba,kmdba,racdba oracle
```

### 变量

```shell
vi ~/.bash_profile
export ORACLE_BASE=/data/app/oracle
export ORACLE_HOME=/data/app/oracle/product/11.2.0/db_1
export ORACLE_SID=oracle

# sqlplus 使用的一些.so文件
export LD_LIBRARY_PATH=/data/app/oracle/product/11.2.0/db_1/stage/ext/lib
export PATH=$PATH:$ORACLE_HOME/bin
```

## 内核参数

### 系统参数

```shell
# 编辑内核参数
vi /etc/sysctl.conf

fs.aio-max-nr = 1048576
fs.file-max = 6815744
kernel.shmall = 16451328
kernel.shmmax = 33692319744
kernel.shmmni = 4096
kernel.sem = 250 32000 100 128
net.ipv4.ip_local_port_range = 9000 65500
net.core.rmem_default = 262144
net.core.rmem_max = 4194304
net.core.wmem_default = 262144
net.core.wmem_max = 1048576

# 生效
sysctl -p
```

### 用户极限参数

```shell
vi /etc/security/limit.conf
oracle   soft   nproc    131072
oracle   hard   nproc    131072
oracle   soft   nofile   131072
oracle   hard   nofile   131072
oracle   soft   core     unlimited
oracle   hard   core     unlimited
oracle   soft   memlock  50000000
oracle   hard   memlock  50000000
```



## 11c 静默安装

### runInstaller

```shell
./runInstaller -silent -force \
FROM_LOCATION=/data/app/oracle/product/11.2.0/db_1/stage/products.xml \
oracle.install.option=INSTALL_DB_SWONLY \
UNIX_GROUP_NAME=oinstall \
INVENTORY_LOCATION=/data/app/oracle-11.2.0-oraInventory \
ORACLE_HOME=/data/app/oracle/product/11.2.0/db_1 \
ORACLE_HOME_NAME="OraDb11g_Home1" \
ORACLE_BASE=/data/app/oracle \
oracle.install.db.InstallEdition=EE \
oracle.install.db.isCustomInstall=false \
oracle.install.db.DBA_GROUP=dba \
oracle.install.db.OPER_GROUP=oper \
DECLINE_SECURITY_UPDATES=true
```

## 19c 静默安装

### runInstaller

```shell
# 进入安装目录

# 备份响应文件
cp install/response/db_install.rsp !#:1.save

vi install/response/db_install.rsp

# 仅设置数据库
oracle.install.option=INSTALL_DB_SWONLY
UNIX_GROUP_NAME=oinstall
# 清单目录(位于ORACLE_BASE之外)
INVENTORY_LOCATION=/usr/local/oracle-INVENTORY
ORACLE_HOME=/usr/local/oracle-19c/product
ORACLE_BASE=/usr/local/oracle-19c
# 企业版
oracle.install.db.InstallEdition=EE
oracle.install.db.OSDBA_GROUP=dba
oracle.install.db.OSOPER_GROUP=oper
oracle.install.db.OSBACKUPDBA_GROUP=backupdba
oracle.install.db.OSDGDBA_GROUP=dgdba
oracle.install.db.OSKMDBA_GROUP=kmdba
oracle.install.db.OSRACDBA_GROUP=racdba
# root脚本执行模式
oracle.install.db.rootconfig.executeRootScript=false

# 退出
:exit

./runInstaller -silent -responseFile install/response/db_install.rsp 
```

## 运行root的俩个脚本

```bash
/data/app/oracle-11.2.0-oraInventory/orainstRoot.sh
/data/app/oracle/product/11.2.0/db_1/root.sh
```

## 启动监听

```shell
# 创建监听
netca /silent /responseFile /usr/local/oracle-19c/product/assistants/netca/netca.rsp
lsnrctl status
```

## 创建数据库并启动实例

```shell
cp assistants/dbca/dbca.rsp assistants/dbca/dbca.rsp.save
vi assistants/dbca/dbca.rsp 
#主要修改以下参数
gdbName=oracle
sid=oracle
databaseConfigType=SI
templateName=General_Purpose.dbc
sysPassword=tengfei1765
systemPassword=tengfeis1765
emConfiguration=DBEXPRESS
dbsnmpPassword=snmp1765
datafileDestination=/usr/local/oracle-19c/oradata
characterSet=AL32UTF8
totalMemory=1024

dbca -silent -createDatabase -responseFile /usr/local/oracle-19c/product/assistants/dbca/dbca.rsp
```



